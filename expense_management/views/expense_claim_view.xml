<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="view_expense_form" model="ir.ui.view">
	    <field name="name">expense.claim.form</field>
	    <field name="model">expense.claim</field>
	    <field name="arch" type="xml">
	      <form string="Expense Claim">
	      <header>
	      		<field name="state" widget="statusbar"/>
	         	<button name="action_submit" type="object" string="Submit" class="btn-primary" invisible="state != 'draft'"/>
	         	<button name="action_approve" type="object" string="Approve" invisible="state == 'approved' or not is_approved_button"/>
	         	<button name="action_reject" type="object" string="Reject" invisible="state != 'approved' or not is_approved_button"/>
	      </header>
	        <sheet>
	          <group>
	          	<group>
	          		<field name="name"/>
		            <field name="employee_id"/>
		            <field name="user_id"/>
		            <field name="approval_rule_id"/>
		            <field name="company_id"/>
		            <field name="amount"/>
	          	</group>
	            <group>
	            	<field name="category"/>
	            	<field name="date"/>
		            <field name="attachment_ids" widget="many2many_binary"/>
		            <field name="is_manager_approver"/>
		            <field name="description"/>
		            <field name="is_approved_button" invisible="1"/>
	            </group>
	          </group>
	          <notebook>
	            <page string="Approvers">
	              <field name="approver_line_ids" readonly="1">
	                <list editable="bottom">
	                  <field name="sequence"/>
	                  <field name="user_id"/>
	                  <field name="approved"/>
	                  <field name="approved_state"/>
	                  <field name="comment" column_invisible="1"/>
	                </list>
	              </field>
	            </page>
	          </notebook>
	        </sheet>
	      </form>
	    </field>
  </record>

  <record id="view_expense_tree" model="ir.ui.view">
    <field name="name">expense.claim.tree</field>
    <field name="model">expense.claim</field>
    <field name="arch" type="xml">
      <list>
        <field name="name"/>
        <field name="employee_id"/>
        <field name="amount"/>
        <field name="state"/>
      </list>
    </field>
  </record>

  <menuitem id="menu_expense_root" name="Expense Mgmt"/>
    
    <!-- Sub-menu under Expense Mgmt -->
    <menuitem id="menu_expense" name="Expenses" parent="menu_expense_root"/>
    
    <!-- Action linked to Expenses menu -->
    <record id="action_expense" model="ir.actions.act_window">
        <field name="name">Expense Claims</field>
        <field name="res_model">expense.claim</field>
        <field name="view_mode">list,form</field>
        <field name="target">current</field>
    </record>
    
    <!-- Link action to menu -->
    <menuitem id="menu_action_expense" name="Expense Claims" parent="expense_management.menu_expense" action="action_expense"/>
    
</odoo>